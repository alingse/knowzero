# KnowZero ç”¨æˆ·äº¤äº’ä¸ Agent æµç¨‹

> ä»ç”¨æˆ·è¡Œä¸ºåˆ° Agent å¤„ç†çš„å®Œæ•´æ˜ å°„ - ç»Ÿä¸€ v2 æ¶æ„

---

## è¾“å…¥æºç»Ÿä¸€å¤„ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Input Normalizer                   â”‚
â”‚                  ç»Ÿä¸€è¾“å…¥å¤„ç†å…¥å£                           â”‚
â”‚                                                              â”‚
â”‚  æ‰€æœ‰ç”¨æˆ·è¾“å…¥ â†’ AgentInput æ ‡å‡†æ ¼å¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  source: CHAT|COMMENT|ENTITY|FOLLOW_UP|ENTRY  â”‚        â”‚
â”‚  â”‚  raw_message: str                              â”‚        â”‚
â”‚  â”‚  comment_data: CommentData (COMMENT æ—¶)          â”‚        â”‚
â”‚  â”‚  entity_data: EntityData (ENTITY æ—¶)            â”‚        â”‚
â”‚  â”‚  current_doc_id: int                           â”‚        â”‚
â”‚  â”‚  session_id: str                                â”‚        â”‚
â”‚  â”‚  user_level: str                               â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
                    Fast-Track Intent Router
```

---

## æµç¨‹ 1ï¼šèŠå¤©æ¶ˆæ¯ (CHAT) - ç»Ÿä¸€æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¡Œä¸º: åœ¨åº•éƒ¨èŠå¤©æ¡†è¾“å…¥æ¶ˆæ¯                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Input Normalizer                                        â”‚
â”‚  source = CHAT                                          â”‚
â”‚  raw_message = "æˆ‘æƒ³å­¦ä¹  React Hooks"                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fast-Track Intent Router                                  â”‚
â”‚  å¼ºè§„åˆ™åŒ¹é…: "æˆ‘æƒ³å­¦" â†’ new_topic (confidence: 1.0)       â”‚
â”‚  è·³è¿‡ LLMï¼Œç›´æ¥è¿”å›                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Intent Agent (å·²é€šè¿‡ Fast-Track ç¡®è®¤)                 â”‚
â”‚  intent_type = "new_topic"                                â”‚
â”‚  target = "React Hooks"                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Route Agent                                             â”‚
â”‚  å†³ç­–: generate_new                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Content Agent                                           â”‚
â”‚  ç”Ÿæˆæ–‡æ¡£:                                               â”‚
â”‚  - topic: "React Hooks å…¥é—¨"                              â”‚
â”‚  - content: [Markdown]                                    â”‚
â”‚  - entities: [useState, useEffect, ç»„ä»¶, çŠ¶æ€]            â”‚
â”‚  - follow_ups: [3-5ä¸ªé—®é¢˜]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                    è¿”å›: {document, follow_up_questions}
```

---

## æµç¨‹ 2ï¼šè¯„è®ºä¼˜åŒ– (COMMENT) - å†…å®¹æŒ‡çº¹é”šç‚¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¡Œä¸º: åœ¨æ–‡æ¡£ä¸­åˆ’çº¿å¹¶æ·»åŠ è¯„è®º                         â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ useEffect è®©å‡½æ•°ç»„ä»¶èƒ½å¤Ÿå¤„ç†å‰¯ä½œç”¨...              â”‚     â”‚
â”‚  â”‚            â”â”â”â”â”â”  â† ç”¨æˆ·åˆ’çº¿             â”‚     â”‚
â”‚  â”‚                                                         â”‚     â”‚
â”‚  â”‚ ğŸ’¬ "è¿™é‡Œå¤ªæŠ½è±¡äº†ï¼Œèƒ½ä¸¾ä¾‹è¯´æ˜å—ï¼Ÿ"            â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Input Normalizer                                        â”‚
â”‚  source = COMMENT                                        â”‚
â”‚  comment_data = {                                        â”‚
â”‚    comment: "è¿™é‡Œå¤ªæŠ½è±¡äº†ï¼Œèƒ½ä¸¾ä¾‹è¯´æ˜å—ï¼Ÿ",               â”‚
â”‚    selected_text: "useEffect è®©å‡½æ•°ç»„ä»¶èƒ½å¤Ÿå¤„ç†å‰¯ä½œç”¨...",   â”‚
â”‚    position: {start: 120, end: 145},                      â”‚
â”‚    document_id: 123                                       â”‚
â”‚  }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯„è®ºé”šç‚¹ç³»ç»Ÿ (Content Fingerprinting)                  â”‚
â”‚                                                         â”‚
â”‚  1. åˆ›å»ºå†…å®¹æŒ‡çº¹é”šç‚¹:                                  â”‚
â”‚     - content_hash: SHA256(é€‰ä¸­æ–‡æœ¬)[:16]                â”‚
â”‚     - keywords: ["useEffect", "å‡½æ•°ç»„ä»¶", "å‰¯ä½œç”¨"]        â”‚
â”‚     - structure: "paragraph_start"                          â”‚
â”‚     - anchor_fingerprint = "hash:keywords:structure"          â”‚
â”‚                                                         â”‚
â”‚  2. ä¿å­˜ä¸Šä¸‹æ–‡:                                           â”‚
â”‚     - anchor_context_prefix: é€‰ä¸­å‰çš„æ–‡æœ¬                      â”‚
â”‚     - anchor_context_suffix: é€‰ä¸­åçš„æ–‡æœ¬                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Intent Agent                                            â”‚
â”‚  åˆ†æè¯„è®ºæ„å›¾:                                            â”‚
â”‚  - intent_type = "optimize_content"                       â”‚
â”‚  - user_need = "more_examples"                             â”‚
â”‚  - suggested_approach = "add_examples"                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Route Agent                                             â”‚
â”‚  å†³ç­–: optimize_section                                     â”‚
â”‚  mode: add_examples                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Content Agent                                           â”‚
â”‚  æ‰§è¡Œä¼˜åŒ–:                                               â”‚
â”‚  1. ç”Ÿæˆ 3 ä¸ªå…·ä½“ä¾‹å­                                     â”‚
â”‚  2. æ’å…¥åˆ° "useEffect è¯¦è§£" ç« èŠ‚                         â”‚
â”‚  3. ä¿å­˜ç‰ˆæœ¬                                             â”‚
â”‚  4. ç”Ÿæˆå˜æ›´è¯´æ˜: "æ·»åŠ äº† 3 ä¸ªå®é™…ä¾‹å­æ¥è¯´æ˜å‰¯ä½œç”¨..."  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                    è¿”å›: {document, change_summary, new_follow_ups}
```

---

## æµç¨‹ 3ï¼šå®ä½“è¯ç‚¹å‡» (ENTITY) - EntityIndex æŸ¥è¯¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¡Œä¸º: ç‚¹å‡»æ–‡æ¡£ä¸­çš„ **useState**                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Input Normalizer                                        â”‚
â”‚  source = ENTITY                                          â”‚
â”‚  entity_data = {                                         â”‚
â”‚    entity_name: "useState",                                â”‚
â”‚    source_doc_id: 123                                    â”‚
â”‚  }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  EntityIndex æŸ¥è¯¢ (å®ä½“è¯ç‹¬ç«‹ç´¢å¼•)                      â”‚
â”‚                                                         â”‚
â”‚  1. æŸ¥è¯¢å®ä½“è¯:                                           â”‚
â”‚     entities.get_or_create_entity("useState")                â”‚
â”‚                                                         â”‚
â”‚  2. æ£€æŸ¥æ˜¯å¦å·²æœ‰æ–‡æ¡£:                                      â”‚
â”‚     - å¦‚æœå­˜åœ¨ â†’ è¿”å›æ‰€æœ‰å…³è”æ–‡æ¡£                             â”‚
â”‚     - å¦‚æœä¸å­˜åœ¨ â†’ è¿”å›ç©ºåˆ—è¡¨ï¼Œæ ‡è®° is_new=True          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                           â–¼
      å·²æœ‰æ–‡æ¡£                        æ— æ–‡æ¡£
              â”‚                           â”‚
              â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Intent Agent      â”‚    â”‚ Intent Agent      â”‚
â”‚ intent_type=      â”‚    â”‚ intent_type=      â”‚
â”‚ "navigate"        â”‚    â”‚ "new_topic"        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                           â”‚
              â–¼                           â–¼
      Route Agent:              Route Agent:
      navigate_to                generate_new
              â”‚                           â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–¼
              Navigator / Content Agent
                          â”‚
                          â–¼
              æ˜¾ç¤ºå·²æœ‰æ–‡æ¡£      æˆ–     ç”Ÿæˆæ–°æ–‡æ¡£
```

---

## æµç¨‹ 4ï¼šè¿½é—®ç‚¹å‡» (FOLLOW_UP)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¡Œä¸º: ç‚¹å‡»è¿½é—®é—®é¢˜æŒ‰é’®                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Input Normalizer                                        â”‚
â”‚  source = FOLLOW_UP                                       â”‚
â”‚  raw_message = "ä¾èµ–æ•°ç»„æ€ä¹ˆå·¥ä½œï¼Ÿ"                        â”‚
â”‚  intent_hint = "follow_up_deepen"  (æŒ‰é’®æºå¸¦çš„æ„å›¾æç¤º)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Intent Agent (ç»§æ‰¿åŸæ„å›¾ç±»å‹)                           â”‚
â”‚  ç”±äº intent_hint æç¤ºäº†æ„å›¾ï¼Œå¯ä»¥è·³è¿‡å¤æ‚åˆ¤æ–­         â”‚
â”‚  intent_type = "follow_up_deepen"                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
            èµ°ã€Œæµç¨‹ 1: èŠå¤©æ¶ˆæ¯ã€çš„åç»­æµç¨‹
```

---

## æµç¨‹ 5ï¼šå…¥å£è¾“å…¥ (ENTRY)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·è¡Œä¸º: åœ¨æ¬¢è¿é¡µè¾“å…¥ä¸»é¢˜                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Input Normalizer                                        â”‚
â”‚  source = ENTRY                                           â”‚
â”‚  raw_message = "React Hooks"                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Intent Agent                                            â”‚
â”‚  ç®€å•æ–°ä¸»é¢˜ï¼Œæ„å›¾æ˜ç¡®                                   â”‚
â”‚  intent_type = "new_topic"                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
            èµ°ã€Œæµç¨‹ 1: èŠå¤©æ¶ˆæ¯ã€çš„åç»­æµç¨‹
```

---

## ç”¨æˆ·è¡Œä¸º â†’ Agent æ¿€æ´»å¯¹ç…§è¡¨ (v2)

| ç”¨æˆ·è¡Œä¸º | æ˜¯å¦æ¿€æ´» Agent | æ¿€æ´»çš„ Agent | æµç¨‹ç¼–å· |
|---------|--------------|--------------|----------|
| å…¥å£è¾“å…¥ä¸»é¢˜ | âœ… | Intent â†’ Route â†’ Content | 1 |
| åº•éƒ¨èŠå¤©è¾“å…¥ | âœ… | Intent â†’ Route â†’ Content | 1 |
| ç‚¹å‡»å®ä½“è¯ | âœ… | EntityIndex â†’ Intent â†’ Route â†’ Content | 3 |
| åˆ’çº¿è¯„è®º | âš ï¸ | ä¿å­˜è¯„è®º; (å¯é€‰) Intent â†’ Route â†’ Content | 2 |
| ç‚¹å‡»è¿½é—®é—®é¢˜ | âœ… | Intent â†’ Route â†’ Content | 1 |
| ç‚¹å‡»ç›®å½•æ ‘ | âŒ | ç›´æ¥è®¿é—®æ•°æ®åº“ | 5 |
| ç‚¹å‡»ç›¸å…³æ–‡æ¡£ | âŒ | ç›´æ¥è®¿é—®æ•°æ®åº“ | 6 |

---

## ä¸ v1 æ¶æ„çš„ä¸»è¦å˜åŒ–

| æ–¹é¢ | v1 | v2 (ç»Ÿä¸€ç‰ˆ) |
|------|----|--------------|
| è¾“å…¥å¤„ç† | åªå¤„ç†èŠå¤©æ¶ˆæ¯ | ç»Ÿä¸€å¤„ç† 5 ç§è¾“å…¥æ¥æº |
| æ„å›¾åˆ†ç±» | æ€»æ˜¯è°ƒç”¨ LLM | Fast-Track ä¸‰å±‚åŒ¹é… |
| å®ä½“è¯å¤„ç† | åµŒåœ¨æ–‡æ¡£ä¸­ | ç‹¬ç«‹çš„ EntityIndex |
| è¯„è®ºé”šç‚¹ | å­—ç¬¦åç§» | å†…å®¹æŒ‡çº¹é”šç‚¹ |
| è·¯ç”±ç­–ç•¥ | complexity é©±åŠ¨ | ç»Ÿä¸€ç”± Route Agent å†³ç­– |

---

## ç»Ÿä¸€çš„æ•°æ®æµ

```
ç”¨æˆ·è¡Œä¸º â†’ Input Normalizer â†’ AgentInput
      â†’ Fast-Track Intent Router
      â†’ Intent Agent (æ ¹æ®è¾“å…¥æºé‡‡ç”¨ä¸åŒç­–ç•¥)
      â†’ Route Agent (æ™ºèƒ½å†³ç­–)
      â†’ Content Agent / Navigator Agent / Planner Agent
      â†’ è¿”å›ç»“æœ
```

---

*ç”¨æˆ·äº¤äº’æµç¨‹è®¾è®¡ v2.0 | KnowZero é¡¹ç›®*
